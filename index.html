<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#07070a" />

  <!-- Melhor sensação de “app” quando adicionar à Tela de Início -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>Progresso</title>

  <style>
    :root{
      --bg0:#05050a;
      --bg1:#0a0a12;

      --white:#f7f7fb;
      --muted:rgba(247,247,251,.72);

      --purple:#8b5cf6;
      --purple2:#a78bfa;
      --red:#ef4444;

      --glass: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.12);
      --shadow: 0 18px 55px rgba(0,0,0,.60);
      --shadow2: 0 10px 24px rgba(0,0,0,.35);

      --radius: 22px;
      --radius2: 16px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    *{ box-sizing:border-box; }
    html, body{
      height: 100%;
      margin: 0;
      background: var(--bg0);
      color: var(--white);
      font-family: var(--sans);
      /* evita “branco” em volta quando dá bounce no iOS */
      -webkit-tap-highlight-color: transparent;
    }

    body{
      background:
        radial-gradient(1200px 800px at 20% 5%, rgba(139,92,246,.33), transparent 55%),
        radial-gradient(900px 700px at 82% 12%, rgba(239,68,68,.18), transparent 56%),
        radial-gradient(900px 800px at 55% 95%, rgba(167,139,250,.16), transparent 62%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overscroll-behavior: none; /* reduz bounce feio */
    }

    /* Safe area: deixa o FUNDO preencher topo/baixo (sem faixa clara) */
    .safe{
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      min-height: 100vh;
      background: transparent;
    }

    .wrap{
      max-width: 860px;
      margin: 0 auto;
      padding: 18px 16px 22px;
    }

    /* Header minimal */
    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 0;
    }

    .logo{
      width: 44px; height: 44px;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(139,92,246,.95), rgba(239,68,68,.55));
      box-shadow: 0 14px 28px rgba(139,92,246,.18);
      position:relative;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .logo::after{
      content:"";
      position:absolute; inset:-55%;
      background: radial-gradient(circle at 35% 30%, rgba(255,255,255,.35), transparent 55%);
      transform: rotate(18deg);
    }

    .title{
      min-width:0;
      line-height:1.05;
    }
    .title h1{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .title p{
      margin: 5px 0 0;
      font-size: 12.5px;
      color: var(--muted);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .chip{
      font-family: var(--mono);
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.24);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow2);
      white-space: nowrap;
    }

    /* Main card */
    .card{
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(900px 420px at 28% 0%, rgba(139,92,246,.14), transparent 52%),
        radial-gradient(720px 420px at 86% 22%, rgba(239,68,68,.10), transparent 58%);
      pointer-events:none;
    }

    .pad{ padding: 16px; position:relative; z-index:1; }

    .row{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap: 12px;
    }

    .pct{
      font-size: 34px;
      font-weight: 820;
      letter-spacing: -0.8px;
      background: linear-gradient(180deg, rgba(247,247,251,.95), rgba(247,247,251,.68));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .count{
      font-family: var(--mono);
      font-size: 12px;
      color: rgba(247,247,251,.85);
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.10);
    }

    .barWrap{
      height: 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      margin-top: 10px;
    }

    .bar{
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(139,92,246,.95), rgba(239,68,68,.92));
      box-shadow: 0 0 26px rgba(139,92,246,.22);
      transition: width 260ms ease;
      position:relative;
    }
    .bar::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
      transform: translateX(-60%);
      animation: shimmer 2.2s infinite linear;
      opacity: .55;
    }
    @keyframes shimmer{
      0%{ transform: translateX(-60%); }
      100%{ transform: translateX(160%); }
    }

    .divider{
      height: 1px;
      background: rgba(255,255,255,.10);
      margin: 14px 0;
    }

    .label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      font-size: 11.5px;
      letter-spacing:.25px;
      text-transform: uppercase;
      color: rgba(247,247,251,.65);
      margin-bottom: 10px;
    }

    .tag{
      font-family: var(--mono);
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(139,92,246,.12);
      border: 1px solid rgba(139,92,246,.34);
      color: rgba(247,247,251,.92);
      white-space: nowrap;
    }

    .topic{
      margin:0;
      font-size: 18px;
      font-weight: 780;
      line-height: 1.25;
    }

    .mini{
      margin: 10px 0 0;
      color: rgba(247,247,251,.80);
      font-size: 13.5px;
      line-height: 1.35;
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }

    .btn{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(247,247,251,.92);
      padding: 12px 14px;
      border-radius: 16px;
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease, filter .18s ease, background .18s ease;
      box-shadow: 0 12px 20px rgba(0,0,0,.20);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-weight: 750;
      letter-spacing: .1px;
      flex: 1 1 140px;
    }
    .btn:active{ transform: scale(.985); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; transform:none; }

    .primary{
      background: linear-gradient(135deg, rgba(139,92,246,.95), rgba(239,68,68,.70));
      border-color: rgba(255,255,255,.10);
    }
    .ghost{
      background: rgba(0,0,0,.22);
      border-color: rgba(255,255,255,.10);
      font-weight: 650;
    }
    .danger{
      background: rgba(239,68,68,.10);
      border-color: rgba(239,68,68,.30);
      font-weight: 700;
    }

    /* Fila compacta e bonita */
    .queue{
      margin-top: 14px;
      border-radius: var(--radius);
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      box-shadow: var(--shadow2);
    }
    .queueTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 12px 14px;
      background: rgba(255,255,255,.04);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .queueTop .qTitle{
      font-size: 13px;
      font-weight: 750;
      letter-spacing:.2px;
    }
    .queueTop .qMeta{
      font-family: var(--mono);
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(247,247,251,.86);
      white-space: nowrap;
    }

    .list{
      max-height: 360px;
      overflow:auto;
      padding: 10px;
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .item{
      display:flex;
      gap: 10px;
      align-items:flex-start;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .dot{
      width: 10px; height:10px; border-radius:999px;
      margin-top: 4px;
      background: rgba(255,255,255,.20);
      box-shadow: 0 0 0 4px rgba(255,255,255,.05);
      flex: 0 0 auto;
    }
    .item.done .dot{
      background: linear-gradient(180deg, rgba(139,92,246,.95), rgba(239,68,68,.75));
      box-shadow: 0 0 0 4px rgba(139,92,246,.10);
    }
    .item.current{
      border-color: rgba(139,92,246,.35);
      background: rgba(139,92,246,.07);
    }
    .text{
      min-width:0;
      flex: 1 1 auto;
    }
    .a{
      font-size: 12px;
      color: rgba(247,247,251,.68);
      margin-bottom: 3px;
      letter-spacing:.2px;
    }
    .b{
      font-size: 13.5px;
      font-weight: 720;
      color: rgba(247,247,251,.92);
      line-height: 1.22;
      word-wrap: break-word;
    }

    /* scrollbar suave */
    .list::-webkit-scrollbar{ width: 10px; }
    .list::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.10);
      border: 2px solid rgba(0,0,0,0);
      background-clip: padding-box;
      border-radius: 999px;
    }

    /* Toast minimal */
    .toast{
      position: fixed;
      left: 50%;
      bottom: calc(14px + env(safe-area-inset-bottom));
      transform: translateX(-50%) translateY(16px);
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      color: rgba(247,247,251,.95);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      font-size: 13px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      max-width: min(520px, 90vw);
      text-align:center;
      z-index: 9999;
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  </style>
</head>

<body>
  <div class="safe">
    <div class="wrap">

      <div class="top">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div class="title">
            <h1>Progresso</h1>
            <p id="sub">—</p>
          </div>
        </div>
        <div class="chip" id="chip">0/0</div>
      </div>

      <div class="card">
        <div class="pad">
          <div class="row">
            <div class="pct"><span id="pct">0</span>%</div>
            <div class="count" id="count">0/0</div>
          </div>
          <div class="barWrap">
            <div class="bar" id="bar"></div>
          </div>

          <div class="divider"></div>

          <div class="label">
            <span>Agora</span>
            <span class="tag" id="tag">—</span>
          </div>

          <p class="topic" id="topic">—</p>
          <p class="mini" id="mini">—</p>

          <div class="actions">
            <button class="btn primary" id="nextBtn">Próximo</button>
            <button class="btn ghost" id="backBtn">Voltar</button>
            <button class="btn danger" id="resetBtn">Reset</button>
          </div>
        </div>
      </div>

      <div class="queue">
        <div class="queueTop">
          <div class="qTitle">Fila</div>
          <div class="qMeta" id="qMeta">—</div>
        </div>
        <div class="list" id="list"></div>
      </div>

    </div>
  </div>

  <div class="toast" id="toast">Salvo</div>

  <script>
    const STORAGE_KEY = "progresso_estudos_v3_index";

    // Lista em ordem (edita aqui quando quiser)
    const conceitos = [
      { area:"Matemática", t:"Álgebra: equações e inequações", q:"Faça 1 inequação e interprete no eixo real." },
      { area:"Matemática", t:"Sistemas lineares", q:"Condição de solução única (det/posto)." },
      { area:"Matemática", t:"Fatoração e produtos notáveis", q:"Fatore x²-9 e reconheça o padrão." },
      { area:"Matemática", t:"Função afim", q:"Interprete coeficiente angular." },
      { area:"Matemática", t:"Função quadrática", q:"Vértice e discriminante (Δ)." },
      { area:"Matemática", t:"Exponencial e logaritmo", q:"Domínio + comportamento." },
      { area:"Matemática", t:"Trigonometria no ciclo", q:"Defina seno/cosseno no círculo." },
      { area:"Matemática", t:"Identidades trigonométricas", q:"1 + tan²x = ? (justifique)." },
      { area:"Matemática", t:"Geometria plana", q:"Aplique um teorema em 1 exemplo." },
      { area:"Matemática", t:"Geometria analítica (reta)", q:"Forma ax+by+c=0." },
      { area:"Matemática", t:"Vetores e produto escalar", q:"Critério de ortogonalidade." },
      { area:"Matemática", t:"Matrizes e determinantes", q:"Interpretação geométrica." },
      { area:"Matemática", t:"Probabilidade", q:"Defina P(A|B)." },

      { area:"Física", t:"Análise dimensional", q:"Cheque a unidade de uma fórmula." },
      { area:"Física", t:"Cinemática (MRU/MRUV)", q:"Equação horária do MRUV." },
      { area:"Física", t:"Leis de Newton", q:"Diagrama de forças (FBD)." },
      { area:"Física", t:"Trabalho e energia", q:"Quando W = ΔK vale?" },
      { area:"Física", t:"Quantidade de movimento", q:"Conservação do momento: condição." },
      { area:"Física", t:"Termologia", q:"Calor vs temperatura." },
      { area:"Física", t:"Ondulatória", q:"v=λf (interprete)." },
      { area:"Física", t:"Eletrodinâmica", q:"P=V²/R (ligue com Ohm)." },

      { area:"Química", t:"Estrutura atômica / Tabela periódica", q:"Explique periodicidade em 1 ideia." },
      { area:"Química", t:"Ligações químicas", q:"Iônica vs covalente: critério." },
      { area:"Química", t:"Estequiometria", q:"m → n → proporção." },
      { area:"Química", t:"Equilíbrio químico", q:"Le Châtelier: exemplo." },
    ];

    const total = conceitos.length;

    const pctEl = document.getElementById("pct");
    const barEl = document.getElementById("bar");
    const topicEl = document.getElementById("topic");
    const miniEl = document.getElementById("mini");
    const tagEl = document.getElementById("tag");
    const listEl = document.getElementById("list");

    const countEl = document.getElementById("count");
    const chipEl = document.getElementById("chip");
    const qMetaEl = document.getElementById("qMeta");
    const subEl = document.getElementById("sub");

    const nextBtn = document.getElementById("nextBtn");
    const backBtn = document.getElementById("backBtn");
    const resetBtn = document.getElementById("resetBtn");

    const toast = document.getElementById("toast");
    let toastTimer = null;

    function clamp(n,a,b){ return Math.max(a, Math.min(b,n)); }

    function loadIndex(){
      const raw = localStorage.getItem(STORAGE_KEY);
      const n = raw === null ? 0 : Number(raw);
      return Number.isFinite(n) ? clamp(n,0,total) : 0;
    }
    function saveIndex(){
      localStorage.setItem(STORAGE_KEY, String(index));
      showToast("Salvo");
    }

    function showToast(text){
      toast.textContent = text;
      toast.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toast.classList.remove("show"), 750);
    }

    function percent(){
      return total === 0 ? 0 : Math.round((index/total)*100);
    }

    function buildList(){
      listEl.innerHTML = "";
      for(let i=0;i<total;i++){
        const c = conceitos[i];
        const item = document.createElement("div");
        item.className = "item";
        if (i < index) item.classList.add("done");
        if (i === index) item.classList.add("current");

        item.innerHTML = `
          <div class="dot"></div>
          <div class="text">
            <div class="a">${c.area}</div>
            <div class="b">${c.t}</div>
          </div>
        `;
        listEl.appendChild(item);
      }
    }

    function render(){
      const p = percent();
      pctEl.textContent = p;
      barEl.style.width = p + "%";

      countEl.textContent = `${index}/${total}`;
      chipEl.textContent = `${index}/${total}`;
      qMetaEl.textContent = `${total} itens`;
      subEl.textContent = `${total} conceitos`;

      backBtn.disabled = (index <= 0);
      nextBtn.disabled = (index >= total);

      if(index === 0){
        tagEl.textContent = "INÍCIO";
        topicEl.textContent = "Toque em Próximo";
        miniEl.textContent = "";
      }else{
        const c = conceitos[index-1];
        tagEl.textContent = c.area.toUpperCase();
        topicEl.textContent = c.t;
        miniEl.textContent = c.q;
      }

      buildList();

      const current = listEl.querySelector(".item.current");
      if(current) current.scrollIntoView({ block:"nearest", behavior:"smooth" });
    }

    let index = loadIndex();

    nextBtn.addEventListener("click", ()=>{
      if(index >= total) return;
      index++;
      saveIndex();
      render();
      if(navigator.vibrate) navigator.vibrate(18);
      if(index >= total && navigator.vibrate) navigator.vibrate([35, 40, 60]);
    });

    backBtn.addEventListener("click", ()=>{
      if(index <= 0) return;
      index--;
      saveIndex();
      render();
      if(navigator.vibrate) navigator.vibrate(12);
    });

    resetBtn.addEventListener("click", ()=>{
      const ok = confirm("Resetar progresso?");
      if(!ok) return;
      index = 0;
      saveIndex();
      render();
      if(navigator.vibrate) navigator.vibrate([25, 25, 25]);
    });

    render();
  </script>
</body>
</html>
